<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
    <link rel="shortcut icon" href="http://localhost:8089/favicon.ico" />
    <link rel="stylesheet" type="text/css" media="screen" href="../../../../css/main.css" />
<link rel="stylesheet" type="text/css" media="screen" href="../../../../css/smoothness/jquery-ui-1.8.5.custom.css" />
    <script type="text/javascript" src="../../../../js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="../../../../js/jquery-ui.min.js"></script>
  </head>
<body>
  <div id="wrapper">
    <div id="header">
      <h1>Dans Velo Stats</h1>
    </div>
    <div id="navigation">
      <ul>
        <li id="rss"><a href="../../../rss.html">RSS Feed</a></li>
        <li><a href="../../../index.html">Statistics</a></li>
        <li><a href="../../tags.html">Media</a></li>
      </ul>
    </div>
    <div class="content">
      <h2>Media</h2>

<h3>for Attempted Circuit de Mnt Hermoine</h3>

<div class="media_list">
  </div>
<div style="clear: both"></div>

<div id="add_tag_dialog" title="Add Tag">
  <form action="57.html#" id="add_tag_form">
  <table class="form">
    <tr>
      <th>Name</th>
      <td><input id="add_tag_form_name" name="name"/></td>
      <td><input type="submit" value="Add Tag"/></td>
    </tr>
  </table>
  </form>
</div>

<script type="text/javascript">
$(document).ready(function () {
  $('#add_tag_dialog').css('display', 'none');

  $('.tag_delete').click(function () {
    var delete_request = Object();
    var tag = $(this).parent();
    delete_request.tag_id = $(this).parent().attr('ref');
    delete_request.media_id = $(this).parents('.media_item').attr('ref');

    $.post(
      "/frontend.php/media/deleteTag",
      delete_request,
      function (data) {
        tag.remove();
      }
    );
  });

  $('.add_tag').click(function () {
    var media_id = $(this).parent().parent().parent().attr('ref');

    $('#add_tag_form').unbind('submit');
    $('#add_tag_form').submit(function () {
      $.post(
      "/frontend.php/media/addTag?media_id=" + media_id, 
      $(this).serializeArray(),
      function (data) {
        $('#add_tag_dialog').dialog("close");
        $('#add_tag_form_name').val('');
        $('#tag_list_' + media_id).prepend(
          '<div class="ui-corner-all tag" ref="' + data.id + '">' + data.name + '</div>');
      }, 'json'
      );

      return false;
    });

    $('#add_tag_dialog').dialog({ height: 100, width: 400 }).title =  'Media ADd';
  });
});
</script>
    </div>
  </div>
    <br/><br/><br/><br/>
</body>
</html>
